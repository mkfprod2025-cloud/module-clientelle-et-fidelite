<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hub Orbital - Final Version</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
 :root {
    --gold: #d4af37;
    --bg-main: #050505;
    --logo-url: none;
}
body { background: var(--bg-main); color: var(--gold); }
.orbit-btn, .modal { border-color: var(--gold); color: var(--gold); }
.center-core { border-color: var(--gold); }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: var(--bg-dark); color: var(--gold);
            font-family: 'Inter', sans-serif;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; touch-action: none;
        }

        .bokeh {
            position: absolute; width: 100%; height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            z-index: -1;
        }

        /* --- BULLES (MENU PRINCIPAL) - ADAPTATION MOBILE --- */
        .orbital-container {
            position: relative;
            width: 95vw; height: 95vw; /* Remplit la largeur */
            max-width: 85vh; max-height: 85vh; /* Remplit la hauteur sans déborder */
            display: flex; justify-content: center; align-items: center;
        }

        .main-ring {
            position: absolute; width: 75%; height: 75%;
            border: 1px solid var(--ring-color); border-radius: 50%;
        }

        /* LOGO : Agrandi pour empiètement et placé en dessous (z-index 1) */
        .center-core {
            position: absolute;
            width: 55%; height: 55%; border-radius: 50%;
            border: 2px solid var(--gold); overflow: hidden;
            z-index: 1; cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: #000;
        }
        .center-core img { width: 100%; height: 100%; object-fit: cover; }

        /* BOUTONS : Agrandis pour aspect "Rempli" (z-index 10) */
        .orbit-btn {
            position: absolute; width: 30%; height: 30%;
            background: rgba(15, 15, 15, 0.95);
            border: 1px solid var(--gold);
            border-radius: 50%; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            color: var(--gold); backdrop-filter: blur(8px); z-index: 10;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        .orbit-btn i { font-size: 1.6rem; margin-bottom: 4px; display: block; }
        .orbit-btn span { font-size: 0.75rem; text-transform: uppercase; font-weight: 700; }

        /* Positions optimisées pour l'empiètement visuel */
      .pos-1 { top: -4%; } 
    .pos-2 { top: 18%; right: -4%; } 
    .pos-3 { bottom: 18%; right: -4%; } 
    .pos-4 { bottom: -4%; } 
    .pos-5 { bottom: 18%; left: -4%; } 
    .pos-6 { top: 18%; left: -4%; }
        .circle-menu-container {
    position: relative;
    width: 100%; /* Utilise toute la largeur de modal-content */
    height: 70vh; /* Utilise la majorité de la hauteur de modal-content */
    margin: 0 auto;
    display: flex;
    justify-content: center;
    align-items: center;
}
.circle-item {
    position: absolute;
    width: 40vw; /* Augmenté pour remplir l'écran mobile */
    height: 40vw; /* Augmenté pour remplir l'écran mobile */
    max-width: 180px;
    max-height: 180px;
    background: rgba(30, 30, 30, 0.95);
    border: 1px solid var(--gold);
    border-radius: 50%; 
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    text-decoration: none; color: white;
    transition: all 0.3s ease;
    transform: translate(var(--x), var(--y));
    z-index: 2;
}
/* Espacement calculé sur le rayon dynamique */
.cp-1 { --x: 0;      --y: -22vw; }
.cp-2 { --x: 19vw;   --y: -11vw; }
.cp-3 { --x: 19vw;   --y: 11vw;  }
.cp-4 { --x: 0;      --y: 22vw;  }
.cp-5 { --x: -19vw;  --y: 11vw;  }
.cp-6 { --x: -19vw;  --y: -11vw; }
        .circle-item:hover { transform: translate(var(--x), var(--y)) scale(1.1); filter: brightness(1.2); }
      
        .center-icon-deco {
            position: absolute; font-size: 4rem; color: #d4af37; opacity: 0.15;
        }
.circle-item i { font-size: 2.2rem; color: var(--gold); margin-bottom: 5px; }
.circle-item span { font-size: 0.8rem; font-weight: 800; }
        /* --- Modals --- */
        .modal {
            display: none; position: fixed; z-index: 1000;
            left: 0; top: 0; width: 100%; height: 100%;
            background: var(--modal-bg); backdrop-filter: blur(15px);
            justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        .modal.active { display: flex; opacity: 1; }
  .modal-content {
    background: var(--modal-card);
    width: 95vw; /* Occupe 95% de la largeur écran */
    height: 80vh; /* Occupe 80% de la hauteur écran */
    max-width: none; 
    padding: 20px 10px;
    border-radius: 20px;
    border: 1px solid var(--gold);
    position: relative;
    color: white;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
        .modal-image { width: 100%; height: 180px; object-fit: cover; border-radius: 15px; margin-bottom: 15px; }
     .modal-title { 
    position: absolute; 
    top: 8%; 
    left: 50%; 
    transform: translateX(-50%); 
    color: var(--gold); 
    font-size: 1.2rem; 
    text-transform: uppercase; 
    font-weight: bold;
    margin: 0;
}

.close-btn { 
    position: absolute; 
    top: 15px; 
    right: 20px; 
    font-size: 24px; 
    color: var(--gold); 
    cursor: pointer; 
    z-index: 2000;
} 
        .action-btn { display: inline-block; background: var(--gold); color: black; padding: 10px 20px; border-radius: 20px; text-decoration: none; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="bokeh"></div>
    <div class="orbital-container">
        <div class="main-ring"></div>
        <div class="center-core" id="zone-zero" onclick="handleZoneZero()">
         <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'/%3E" alt="Logo">
        </div>
        <div id="orbit-wrapper"></div>
    </div>

    <div id="modal-plat" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal('modal-plat')">&times;</span><h2 class="modal-title">Suggestion</h2><img src="" class="modal-image"><h3></h3><p></p></div></div>
    <div id="modal-social" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal('modal-social')">&times;</span><h2 class="modal-title">Communauté</h2><div class="circle-menu-container" id="social-container"></div></div></div>
    <div id="modal-video" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal('modal-video')">&times;</span><div class="video-box" id="video-container"></div></div></div>
    <script>
        window.hubData = {};
function loadHubData(data) {
  window.hubData = data;
  applyBranding(data.branding);
  renderOrbitButtons(data.bulles);
}

function initHub() {
  const G_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz3NEYvk3nt8YkRtnsAzvU36KGETKhnYS1UBMi6xzcOAw_ijNriLeuVANqqfH7NzvFGWg/exec";
  const script = document.createElement('script');
  script.src = G_SCRIPT_URL + '?callback=loadHubData';
  document.body.appendChild(script);
}
function applyBranding(config) {
    const root = document.documentElement.style;
    root.setProperty('--gold', config.accent_hex);
    root.setProperty('--bg-main', config.bg_type === 'color' ? config.bg_val : `url(${config.bg_val})`);
    
    const logo = document.querySelector('.center-core img');
    if (logo && config.logo_src) logo.src = config.logo_src;
    
    document.body.style.fontFamily = config.font_family || 'Inter';
}
function renderOrbitButtons(bulles) {
    const wrapper = document.getElementById('orbit-wrapper');
    wrapper.innerHTML = ''; 
    bulles.forEach(btn => {
        if (!btn.active) return;
        const div = document.createElement('div');
        div.className = `orbit-btn pos-${btn.pos_id}`;
        div.innerHTML = `<svg viewBox="0 0 512 512" width="28" height="28" fill="currentColor">${btn.icon_data}</svg><span>${btn.label}</span>`;
        div.onclick = () => btn.action === 'modal' ? openModal(btn.target) : window.location.href = btn.target;
        wrapper.appendChild(div);
    });
}

function openModal(id) {
    if (id === 'modal-plat') {
        const m = document.getElementById(id);
        m.querySelector('h3').innerText = window.hubData.plat.nom;
        m.querySelector('p').innerText = window.hubData.plat.description;
        m.querySelector('.modal-image').src = window.hubData.plat.image;
    }
    document.getElementById(id).classList.add('active');
}

function closeModal(id) {
    document.getElementById(id).classList.remove('active');
    if(id === 'modal-video') document.getElementById('video-container').innerHTML = '';
}
function handleZoneZero() {
    const branding = window.hubData.branding;
    const videoContainer = document.getElementById('video-container');
    
    if (branding.video_src) {
        // Vidéo uploadée Drive
        videoContainer.innerHTML = `<video width="100%" height="100%" controls autoplay><source src="${branding.video_src}" type="video/mp4"></video>`;
    } else if (branding.texte_zone_zero) {
        // Texte d'accueil
        videoContainer.innerHTML = `<p style="color: var(--gold); font-size: 1.5rem; padding: 20px;">${branding.texte_zone_zero}</p>`;
    } else {
        // Fallback
        videoContainer.innerHTML = `<p style="color: var(--gold);">Bienvenue</p>`;
    }
    
    openModal('modal-video');
}
window.onclick = (e) => { if (e.target.classList.contains('modal')) closeModal(e.target.id); };
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initHub);
} else {
    initHub();
}
   </script>
</body>
</html>
























