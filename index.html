<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hub Orbital - Final Version</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
 :root {
    --gold: #d4af37;
    --bg-main: #050505;
    --logo-url: url('https://via.placeholder.com/300');
}
body { background: var(--bg-main); color: var(--gold); }
.orbit-btn, .modal { border-color: var(--gold); color: var(--gold); }
.center-core { border-color: var(--gold); }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: var(--bg-dark); color: var(--gold);
            font-family: 'Inter', sans-serif;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; touch-action: none;
        }

        .bokeh {
            position: absolute; width: 100%; height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
            z-index: -1;
        }

        /* --- BULLES (MENU PRINCIPAL) - ADAPTATION MOBILE --- */
        .orbital-container {
            position: relative;
            width: 95vw; height: 95vw; /* Remplit la largeur */
            max-width: 85vh; max-height: 85vh; /* Remplit la hauteur sans déborder */
            display: flex; justify-content: center; align-items: center;
        }

        .main-ring {
            position: absolute; width: 75%; height: 75%;
            border: 1px solid var(--ring-color); border-radius: 50%;
        }

        /* LOGO : Agrandi pour empiètement et placé en dessous (z-index 1) */
        .center-core {
            position: absolute;
            width: 55%; height: 55%; border-radius: 50%;
            border: 2px solid var(--gold); overflow: hidden;
            z-index: 1; cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: #000;
        }
        .center-core img { width: 100%; height: 100%; object-fit: cover; }

        /* BOUTONS : Agrandis pour aspect "Rempli" (z-index 10) */
        .orbit-btn {
            position: absolute; width: 30%; height: 30%;
            background: rgba(15, 15, 15, 0.95);
            border: 1px solid var(--gold);
            border-radius: 50%; display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            color: var(--gold); backdrop-filter: blur(8px); z-index: 10;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        .orbit-btn i { font-size: 1.6rem; margin-bottom: 4px; display: block; }
        .orbit-btn span { font-size: 0.75rem; text-transform: uppercase; font-weight: 700; }

        /* Positions optimisées pour l'empiètement visuel */
      .pos-1 { top: -4%; } 
    .pos-2 { top: 18%; right: -4%; } 
    .pos-3 { bottom: 18%; right: -4%; } 
    .pos-4 { bottom: -4%; } 
    .pos-5 { bottom: 18%; left: -4%; } 
    .pos-6 { top: 18%; left: -4%; }
        .circle-menu-container {
    position: relative;
    width: 100%; /* Utilise toute la largeur de modal-content */
    height: 70vh; /* Utilise la majorité de la hauteur de modal-content */
    margin: 0 auto;
    display: flex;
    justify-content: center;
    align-items: center;
}
.circle-item {
    position: absolute;
    width: 40vw; /* Augmenté pour remplir l'écran mobile */
    height: 40vw; /* Augmenté pour remplir l'écran mobile */
    max-width: 180px;
    max-height: 180px;
    background: rgba(30, 30, 30, 0.95);
    border: 1px solid var(--gold);
    border-radius: 50%; 
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    text-decoration: none; color: white;
    transition: all 0.3s ease;
    transform: translate(var(--x), var(--y));
    z-index: 2;
}
/* Espacement calculé sur le rayon dynamique */
.cp-1 { --x: 0;      --y: -22vw; }
.cp-2 { --x: 19vw;   --y: -11vw; }
.cp-3 { --x: 19vw;   --y: 11vw;  }
.cp-4 { --x: 0;      --y: 22vw;  }
.cp-5 { --x: -19vw;  --y: 11vw;  }
.cp-6 { --x: -19vw;  --y: -11vw; }
        .circle-item:hover { transform: translate(var(--x), var(--y)) scale(1.1); filter: brightness(1.2); }
      
        .center-icon-deco {
            position: absolute; font-size: 4rem; color: #d4af37; opacity: 0.15;
        }
.circle-item i { font-size: 2.2rem; color: var(--gold); margin-bottom: 5px; }
.circle-item span { font-size: 0.8rem; font-weight: 800; }
        /* --- Modals --- */
        .modal {
            display: none; position: fixed; z-index: 1000;
            left: 0; top: 0; width: 100%; height: 100%;
            background: var(--modal-bg); backdrop-filter: blur(15px);
            justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        .modal.active { display: flex; opacity: 1; }
  .modal-content {
    background: var(--modal-card);
    width: 95vw; /* Occupe 95% de la largeur écran */
    height: 80vh; /* Occupe 80% de la hauteur écran */
    max-width: none; 
    padding: 20px 10px;
    border-radius: 20px;
    border: 1px solid var(--gold);
    position: relative;
    color: white;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
        .modal-image { width: 100%; height: 180px; object-fit: cover; border-radius: 15px; margin-bottom: 15px; }
     .modal-title { 
    position: absolute; 
    top: 8%; 
    left: 50%; 
    transform: translateX(-50%); 
    color: var(--gold); 
    font-size: 1.2rem; 
    text-transform: uppercase; 
    font-weight: bold;
    margin: 0;
}

.close-btn { 
    position: absolute; 
    top: 15px; 
    right: 20px; 
    font-size: 24px; 
    color: var(--gold); 
    cursor: pointer; 
    z-index: 2000;
} 
        .action-btn { display: inline-block; background: var(--gold); color: black; padding: 10px 20px; border-radius: 20px; text-decoration: none; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="bokeh"></div>
<div class="orbital-container">
    <div class="main-ring"></div>
    
    <div class="center-core" id="zone-zero" onclick="handleZoneZero()">
        <img src="https://via.placeholder.com/300/d4af37/000000?text=LOGO" alt="Logo">
    </div>
    <div class="orbit-btn pos-1" onclick="ouvrirPlat()">
    <i class="fa-solid fa-utensils"></i>
    <span>Plat</span>
</div>
    <div class="orbit-btn pos-2" onclick="openModal('modal-menu')">
        <i class="fa-solid fa-book-open"></i>
        <span>Carte</span>
    </div>

    <div class="orbit-btn pos-3" onclick="openModal('modal-avis')">
        <i class="fa-solid fa-star"></i>
        <span>Avis</span>
    </div>

    <div class="orbit-btn pos-4" onclick="openModal('modal-social')">
        <i class="fa-solid fa-hashtag"></i>
        <span>Suivre</span>
    </div>

    <div class="orbit-btn pos-5" onclick="openModal('modal-plus')">
        <i class="fa-solid fa-plus"></i>
        <span>Hub</span>
    </div>

    <div class="orbit-btn pos-6" onclick="openModal('modal-wifi')">
        <i class="fa-solid fa-wifi"></i>
        <span>Wi-Fi</span>
    </div>
</div>
 <div id="modal-social" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal('modal-social')">&times;</span><h2 class="modal-title">Communauté</h2><div class="circle-menu-container"><i class="fa-solid fa-share-nodes center-icon-deco"></i><a href="#" class="circle-item cp-1"><i class="fa-brands fa-instagram"></i><span>Insta</span></a><a href="#" class="circle-item cp-2"><i class="fa-brands fa-tiktok"></i><span>TikTok</span></a><a href="#" class="circle-item cp-3"><i class="fa-brands fa-facebook"></i><span>Fb</span></a><a href="#" class="circle-item cp-4"><i class="fa-brands fa-whatsapp"></i><span>What</span></a><a href="#" class="circle-item cp-5"><i class="fa-brands fa-snapchat"></i><span>Snap</span></a><a href="#" class="circle-item cp-6"><i class="fa-brands fa-x-twitter"></i><span>X</span></a></div></div></div>
    <div id="modal-plus" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal('modal-plus')">&times;</span><h2 class="modal-title">Services</h2><div class="circle-menu-container"><i class="fa-solid fa-bell-concierge center-icon-deco"></i><a href="#" class="circle-item cp-1"><i class="fa-brands fa-uber"></i><span>Uber</span></a><a href="#" class="circle-item cp-2"><i class="fa-solid fa-calendar-check"></i><span>Book</span></a><a href="#" class="circle-item cp-3"><i class="fa-solid fa-gifts"></i><span>Promo</span></a><a href="#" class="circle-item cp-4"><i class="fa-brands fa-tripadvisor"></i><span>Trip</span></a><a href="#" class="circle-item cp-5"><i class="fa-solid fa-utensils"></i><span>Fork</span></a><a href="#" class="circle-item cp-6"><i class="fa-solid fa-envelope"></i><span>Mail</span></a></div></div></div>
    
    <div id="modal-plat" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal('modal-plat')">&times;</span><h2 class="modal-title">Suggestion</h2><img src="https://images.unsplash.com/photo-1544025162-d76694265947?w=500" class="modal-image"><h3>Souris d'Agneau</h3><p>Cuisson 7h au thym.</p></div></div>
    <div id="modal-video" class="modal"><div class="modal-content"><span class="close-btn" onclick="closeModal('modal-video')">&times;</span><div class="video-box" id="video-container"></div></div></div>

    <script>
        function openModal(id) { document.getElementById(id).classList.add('active'); }
        function closeModal(id) { 
            document.getElementById(id).classList.remove('active'); 
            if(id === 'modal-video') document.getElementById('video-container').innerHTML = '';
        }
        function handleZoneZero() {
            document.getElementById('video-container').innerHTML = `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1" frameborder="0" allowfullscreen></iframe>`;
            openModal('modal-video');
        }
        window.onclick = function(e) { if (e.target.classList.contains('modal')) closeModal(e.target.id); }
async function ouvrirPlat() {
    // Ajout d'un timestamp pour éviter le cache de GitHub (mise à jour instantanée)
    const url = 'https://raw.githubusercontent.com/mkfprod2025-cloud/module-clientelle-et-fidelite/main/platdujours.json?t=' + new Date().getTime();
    
    try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('Erreur réseau');
        
        const data = await response.json();
        
        const modal = document.getElementById('modal-plat');
        // On vérifie que les éléments existent avant de les remplir
        if(data.nom) modal.querySelector('h3').innerText = data.nom;
        if(data.description) modal.querySelector('p').innerText = data.description;
        if(data.image) modal.querySelector('.modal-image').src = data.image;
        
        modal.classList.add('active');
    } catch (error) {
        console.error("Erreur de récupération JSON:", error);
        // Ouvre la modal même si le JSON échoue pour ne pas bloquer l'utilisateur
        document.getElementById('modal-plat').classList.add('active');
    }
}
 function applyBranding(config) {
    // 1. Injection CSS globale
    let style = document.getElementById('dynamic-branding');
    if (!style) {
        style = document.createElement('style');
        style.id = 'dynamic-branding';
        document.head.appendChild(style);
    }
    
    style.innerHTML = `
        :root {
            --gold: ${config.accent_hex};
            --bg-main: ${config.bg_type === 'color' ? config.bg_val : `url(${config.bg_val})`};
        }
    `;

    // 2. Mise à jour du Logo
    const logo = document.querySelector('.center-core img');
    if (logo) logo.src = config.logo_src;
}
       async function initHub() {
    const G_SCRIPT_URL = "VOTRE_URL_SCRIPT_UNIQUE";
    try {
        const response = await fetch(G_SCRIPT_URL);
        const globalData = await response.json();
        
        // Appliquer le branding immédiatement
        applyBranding(globalData.branding);
        
        // Stocker le reste pour les modales (Bulles, Plat, etc.)
        window.hubData = globalData; 
    } catch (e) {
        console.error("Échec initialisation critique.");
    }
}
window.onload = initHub; 
</script>
</body>
</html>





